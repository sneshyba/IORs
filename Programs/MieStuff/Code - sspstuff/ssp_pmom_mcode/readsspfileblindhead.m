function f = readsspfileblindhead(sspfile)%% Reads ssp file header information%% Author of original c-code, read_single_scat_database.c:% Dave Turner% Pacific Northwest National Laboratory% University of Wisconsin - Madison% Date:% July 2002%% Adapted to Matlab by Steven Neshyba, May 2009% Size of the iops part of datasetNfrompsd = 13;% Open the file  fp = gopen(filename, "r");fid = fopen(sspfile,'r');% % First two lines are commentline = fgets(fid);line = fgets(fid);% Number of data lines (#wavelengths times #radii)line = fgets(fid); Nlines=getfirstnum(line);% Number of phase function anglesline = fgets(fid); NANG=getfirstnum(line);% Another comment lineline = fgets(fid);% Phase anglesline = fgets(fid); ppa = str2num(line);% Read the last commented lineline = fgets(fid);% Preallocate the straight Pnrm and iops arraysPnrm_psd_straight = zeros(NANG,Nlines);iops_psd_straight = zeros(Nfrompsd,Nlines);Ntot = NANG+Nfrompsd;wave = 0;% Get all the datafor iline=1:Nlines    lastwave = wave;    line = fgets(fid);    dline = str2num(line);    iops_psd_straight(:,iline) = dline(1:Nfrompsd);    wave = iops_psd_straight(1,iline);    if (iline > 1)        if (wave ~= lastwave)            Nreff = iline-1;            break        end    endend    NIORS = round(Nlines/Nreff);if Nreff*NIORS ~= Nlines    'Bad input'    f = 0;    fclose(fid);else    f.NANG = NANG;    f.NIORS = NIORS;    f.Nreff=Nreff;    f.ppa=ppa';    f.reff=iops_psd_straight(3,1:Nreff)';    f.Volumes=iops_psd_straight(12,1:Nreff)';    f.Areas=iops_psd_straight(13,1:Nreff)';    fclose(fid);endreturn